<script>
const CHANNEL="astro_gautam_chat";

const pubnub=new PubNub({
  publishKey:"pub-c-a90a128a-4e77-4b6a-bbb3-59d0fb688ddc",
  subscribeKey:"sub-c-1b514e35-fab1-4baf-88f1-6b628ab7e9c2",
  uuid:"Astrologer_Gautam"
});

pubnub.subscribe({channels:[CHANNEL]});

pubnub.addListener({
  message:e=>{
    const m=e.message;
    if(m.sender === pubnub.getUUID()) return;
    addMsg(`${m.sender}: ${m.text}`);
  }
});

function send(){
  const input=document.getElementById("reply");
  const text=input.value.trim();
  if(!text)return;
  input.value="";
  addMsg("You: "+text,true);

  pubnub.publish({
    channel:CHANNEL,
    message:{
      sender:pubnub.getUUID(),
      text:text
    }
  });
}

function addMsg(text,me=false){
  const d=document.createElement("div");
  d.className="msg "+(me?"me":"customer");
  d.textContent=text;
  chatBody.appendChild(d);
  chatBody.scrollTop=chatBody.scrollHeight;
}
</script>


